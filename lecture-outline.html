<!DOCTYPE HTML>
<!--
Solarize by TEMPLATED
templated.co @templatedco
Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
<head>
 <title>Functional Programming and Software Engineering</title>
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <meta name="description" content="" />
 <meta name="keywords" content="" />
 <!--[if lte IE 8]><script src="/pl/css/ie/html5shiv.js"></script><![endif]-->
 <script src="/pl/js/jquery.min.js"></script>
 <script src="/fpse/js/jquery.dropotron.min.js"></script>
 <script src="/fpse/js/skel.min.js"></script>
 <script src="/fpse/js/skel-layers.min.js"></script>
 <script src="/fpse/js/init.js"></script>
 <noscript>
  <link rel="stylesheet" href="/fpse/css/skel.css" />
  <link rel="stylesheet" href="/fpse/css/style.css" />
 </noscript>
 <!--[if lte IE 8]><link rel="stylesheet" href="/fpse/css/ie/v8.css" /><![endif]-->
</head>
<body>

 <!-- Header Wrapper -->
  <div class="wrapper style1">
  
  <!-- Header -->
   <div id="header">
    <div class="container">
      
     <!-- Logo -->
      <h1><a href="/fpse/index.html" id="logo">FPSE</a></h1>
     
     <!-- Nav -->
      <nav id="nav">
       <ul>
          <li><a href="/fpse/logistics.html">Logistics</a></li>
          <li><a href="/fpse/syllabus.html">Syllabus</a></li>
          <li><a href="/fpse/dateline.html">Dateline</a></li> <!-- converted; don't edit .html edit .md -->
          <li><a href="/fpse/coding.html">Coding</a>
          <li><a href="/fpse/assignments/">Assignments</a>
          <li><a href="https://piazza.com/class/kd4zpku2vbg1az">Piazza</a></li>
          <li><a href="/fpse/contact.html">Contact Us</a></li>
      </ul>
</nav>
</div>
</div>


<!-- close-out code before the standard footer .. use to glue in raw html. -->
</div>
<!-- Main -->
<div id="main" class="wrapper style4">
<!-- Content -->
<div id="content" class="container">
<section>

<link rel="stylesheet" href="/fpse/css/friendly.css" />
<meta charset="utf-8" />
    <h1 id="lecture-outline">Lecture Outline</h1>

<h3 id="near-term-topics">Near term topics</h3>
<ul>
  <li>side effects, with more and more realistic examples</li>
  <li>Nested modules, top loop vs file modules. (#use doesn’t make a module for example #mod_use does though)</li>
  <li>dune utop, #use_output “dune top”;; (wrote that in basic-modules, briefly cover it)</li>
  <li>ppx_deriving_json for HW2</li>
</ul>

<h3 id="topics-left-to-hit-from-early-part-of-outline">Topics left to hit from early part of outline</h3>
<ul>
  <li>Keep making more real examples of programs!</li>
  <li>Type-directed programming examples would be good</li>
  <li>Operators as functions and making your own infix syntax - <code>let (^^) x y = x * y</code> kind of thing.  see RWOC prefix and infix operators.</li>
  <li><code>begin</code>/<code>end</code> to replace parens</li>
  <li>Advanced patterns - <code>p when e</code>, <code>'a' .. 'z'</code>, <code>as x</code>, or <code>|</code> patterns in let…  Cornell 3.1.7</li>
</ul>

<h2 id="types">Types</h2>
<ul>
  <li>Type inference and weak polymorphism</li>
  <li>Equality on and Pretty printing declated data types with <code>ppx_deriving</code></li>
  <li>Type-driven development - very important topic to touch on somewhere; fits well with GADTS.</li>
</ul>

<h2 id="more-modules">More Modules</h2>
<ul>
  <li>Modules defined in the top loop</li>
  <li>Using that syntax to define nested modules</li>
  <li>include</li>
  <li>first-class modules</li>
  <li><code>Core</code>’s set library</li>
  <li>high-level discussion of witness stuff.</li>
</ul>

<h2 id="side-effects">Side effects</h2>

<h3 id="mutation">Mutation</h3>
<ul>
  <li>Standard mutation topics: ref, mutable records, arrays.  Printing earlier - ?</li>
  <li>sequencing; <code>ignore(3+4); print_string "hi"</code> to avoid warnings.  Cornell 8.3</li>
  <li><code>==</code> vs <code>=</code> - Cornell 8.6</li>
  <li>Mutable stack eg - Cornell 8.8; get a Base alternative example, e.g. <code>Hashtbl</code> (see libraries)</li>
  <li>Weakly polymorphic types <code>‘_a</code> - Cornell 8.8 (save details on this for advanced types below?)</li>
</ul>

<h3 id="exceptions">Exceptions</h3>
<p>See RWOC Error/Exceptions chapter.</p>
<ul>
  <li>lack of exception effects in types is old-fashioned.  Using option types or Ok/Error is often better.</li>
  <li><code>match f x with exception _ -&gt; blah | ...</code> shorthand syntax</li>
</ul>

<h3 id="io-and-stdio">I/O and Stdio</h3>
<ul>
  <li>Basic printing</li>
  <li><code>Stdio</code>
    <ul>
      <li>Channels, etc</li>
    </ul>
  </li>
</ul>

<h2 id="libraries">Libraries</h2>
<p>Do libraries with modules as the <code>Core</code> modules need understanding of functors, abstraction, etc</p>

<ul>
  <li><a href="https://ocaml.janestreet.com/ocaml-core/latest/doc/core/index.html"><code>Core</code></a>
    <ul>
      <li><code>Map</code> (and <code>List.Assoc</code> a bit).  RWOC 13.</li>
      <li><code>Hashtbl</code>, good example of mutable code.  RWOC 13</li>
    </ul>
  </li>
  <li>Command line parsing - RWOC ch14</li>
  <li>JSON data - RWOC ch15</li>
</ul>

<h2 id="buildpackagetest-in-ocaml">Build/Package/Test in Ocaml</h2>

<h3 id="dune">Dune</h3>
<ul>
  <li>Tree nature of dune files</li>
  <li>Defining libraries with <code>library</code></li>
  <li>Defining executables with <code>executable</code></li>
  <li>Using libraries via <code>libraries</code> (uses <code>ocamlfind</code> in the background)</li>
  <li>etc for other options in <code>dune</code> files</li>
  <li>Test executables with <code>Ounit2</code></li>
  <li>Poking your code in the top loop: <code>dune utop</code>, <code>dune top</code>, and <code>#use_output "dune top";;</code></li>
  <li>Merlin with dune - basics on configuring to parse libraries used properly, etc.  Cornell 3.1.3.4</li>
  <li>Command line: <code>dune build</code>, <code>dune runtest</code>, <code>dune exec</code></li>
  <li>Backtracing on error in dune: use <code>Base</code>, backtraces turned on by default then.</li>
</ul>

<h3 id="basic-documentation-and-testing">Basic Documentation and Testing</h3>
<ul>
  <li>Principles of testing
    <ul>
      <li>black box and glass box testing.  Cornell Ch7</li>
    </ul>
  </li>
  <li><code>ocamldoc</code>comments, Cornell 2.3.7</li>
  <li><code>OUnit</code> unit testing library Cornell 3.1.3</li>
</ul>

<h2 id="idiomatic-functional-programming">Idiomatic Functional Programming</h2>
<ul>
  <li>A major theme of the course</li>
  <li>design patterns (OO) = idioms (FP)</li>
  <li>Contrasting OO with functional - state machine vs pipeline of data (data-oriented design). Look into doing this earlier in the class.</li>
  <li>Refactoring also applies to FP.
    <ul>
      <li>pull out duplicate code as its own function parameter, or inline if gratuitous</li>
      <li>Divide one function into two if it is doing two different things</li>
      <li>Make code more parametric (or less if not needed)</li>
      <li>Rename</li>
      <li>Lift or hide (demote) functions/variables</li>
      <li>Inline definition or converse - inline let definitions if simple, make more if too complex</li>
      <li>Move around reponsibilties, make more modular by putting fewer things in public interface</li>
      <li>Type refactoring - remove unneeded things, generalize (make polymorphic or GADT)</li>
      <li>Module refactoring - pull out code into a new module, move a function from one module to another.</li>
      <li>Combinize: replace recursion with maps and folds</li>
      <li>Use more pattern matching</li>
      <li>[A list of smells and principles also would be good, many of the above are DRY or “compression-driven development” issues.]</li>
    </ul>
  </li>
  <li>Type-aided extension: add a type to a variant, then clean up on the type error messages.
    <ul>
      <li>Applies to many other contexts as well: make a change, chase type errors.  Type errors gone =&gt; code works.</li>
    </ul>
  </li>
  <li>Go through some imperative to functional code refactorings</li>
  <li>The expression problem and functional vs OO trade-off.</li>
</ul>

<h2 id="specification">Specification</h2>

<ul>
  <li>Specifying properties of programs
    <ul>
      <li>Type-directed programming: start out by writing types &amp; module signatures as a skeleton</li>
      <li><code>assert</code> for more fine-grained properties not expressible with types</li>
      <li>Referential transparency</li>
      <li>Abstract interfaces: white box vs gray box vs black box (&lt;abst&gt;).
        <ul>
          <li>Black box can be bad - like closed-source code.  Really need a read-only notion, you can see the structure if needed.  Too hard now to figure out what is under the hood.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Invariants
    <ul>
      <li>Types as (basic) invariants, with an automatic always-running static checker</li>
      <li>Data structure Invariants - Cornell Representation Invariants, Ch6</li>
      <li>recursive function invariants</li>
      <li>representation invariants</li>
    </ul>
  </li>
</ul>

<h2 id="orphan-topics">Orphan Topics</h2>
<ul>
  <li>Streams and laziness - Cornell 12.1</li>
  <li>Memoization - RWOC Imperative chapter, Cornell 12.4</li>
</ul>

<h2 id="advanced-modules">Advanced modules</h2>
<p>(May need to do some of this earlier)</p>

<ul>
  <li><code>include</code> - Cornell 5.3.1; 5.3.1.2; subtlety of abstr with it</li>
  <li>Nested modules - in RWOC 4.</li>
  <li>First-class modules - RWOC 10.</li>
  <li><code>let open List in ..</code> and <code>List.(...map....)</code> syntax</li>
  <li>Anonymous functors:  <code>module F = functor (M : S) -&gt; ... -&gt; functor (M : S) -&gt; struct  ... end</code></li>
  <li>more examples of functors being useful. libraries, etc. Cornell 5.3.2.2, .3</li>
  <li>passing anonymous structs to functors Cornell 5.3.2.3</li>
  <li><code>comparator_witness</code> and comparison in Jane Street modules</li>
  <li>Type sharing constraints and destructive substitution to deal with too-hidden types.  RWOC Functors chapter.</li>
</ul>

<h2 id="advanced-types">Advanced Types</h2>

<ul>
  <li>Weak polymorphism</li>
  <li>Covariant types <code>+'a t = ...</code> - declares contents are not mutable so can be fully polymorphic not weakly.  RWOC weak polymorphism section.</li>
  <li>GADTS - see PLII lecture notes.    Make sure to discuss with type-driven development</li>
  <li>New Jane street extensions: <a href="https://github.com/janestreet/higher_kinded/">higher-kinded types</a> and <a href="https://github.com/janestreet/accessor">accessors</a> which are like Haskell lenses.</li>
</ul>

<h2 id="advanced-testing">Advanced Testing</h2>
<p>See <a href="https://github.com/realworldocaml/book/tree/master/book/testing">draft RWOC chapter</a></p>

<ul>
  <li>Along with <code>OUnit</code> may also want to do <code>ppx_inline_tests</code> or whatever it is called.  RWOC using it.. Only problem is it is not working with 4.10 and utop.</li>
  <li><code>Bisect</code> for code coverage. Cornell 7.4</li>
  <li>Property-based testing aka randomized testing aka fuzz testing, <code>QCheck</code>.  Cornell 7.7-7.9</li>
</ul>

<h2 id="monads-and-monad-likes">Monads and monad-likes</h2>

<h3 id="monad-warm-up">Monad Warm-up</h3>
<ul>
  <li><code>Option.bind</code> in base, also let%bind for that.. RWOC Error Handling chapter</li>
  <li>State passing and exception encoding - PLII notes</li>
  <li>CPS</li>
  <li>Async library and promises - Cornell 12.2 or RWOC 14.  Leaning to Async.</li>
</ul>

<h3 id="monads-proper">Monads proper.</h3>

<ul>
  <li>Monads.  PLII notes for all the monad topics.</li>
  <li>Monad laws.</li>
  <li>Monad transormers (or, skip?)</li>
  <li>Monad programming.  Need to decide what libraries/bindings to use.  Jane Street has <code>Base.Monad</code> and <code>ppx_let</code>, or use <code>let*</code> now. unclear.  I don’t think Jane street library has transformers?</li>
  <li>Comprehension.. need to research this.  See <code>map</code> in <code>Base.Monad</code> stuff.</li>
</ul>

<h2 id="metaprogramming-ppx-extensions">Metaprogramming: ppx extensions</h2>
<ul>
  <li>See RWOC ch23 (not written yet unfortunately).</li>
  <li>Tutorial at http://rgrinberg.com/posts/extension-points-3-years-later/</li>
  <li><a href="https://github.com/janestreet/ppx_jane"><code>ppx_jane</code></a> (comparison, hash, conversion between S-Expr),</li>
  <li><a href="https://ocaml.janestreet.com/ocaml-core/latest/doc/ppx_let/index.html"><code>ppx_let</code></a>.</li>
</ul>

<h2 id="under-the-hood-of-functional-language-runtimes">Under the hood of functional language runtimes</h2>
<ul>
  <li>Substitution notion of running functions and <code>let</code> - informal PLI stuff.</li>
  <li>Tail recursion Cornell 3.1.1.5.</li>
  <li>Garbage collection</li>
  <li>Efficiency of functional vs mutable data structures.  Some in Ch9 Cornell.</li>
  <li>RWOC has a chapter on this, also on GC, maybe do a peek at that (not much though)</li>
</ul>

<h2 id="fp-in-other-languages">FP in other languages</h2>

<ul>
  <li>JavaScript, <a href="https://reactjs.org/docs/hooks-intro.html">React hooks</a>, and <a href="https://reasonml.github.io/reason-react/">ReasonReact</a></li>
  <li>Python</li>
  <li>Java lambdas</li>
  <li>Elm</li>
</ul>

<h2 id="top-level-directives-not-sure-where-to-put-this-just-my-own-reference-for-now">Top level directives (not sure where to put this, just my own reference for now)</h2>
<ul>
  <li><code>#directory adir</code> - adds <code>adir</code> to the list of directories to search for files.</li>
  <li><code>#pwd</code> - shows current working directory.</li>
  <li><code>#trace afun</code> - calls and returns to <code>afun</code> will now be dumped to top level - a simple debugging tool.</li>
  <li><code>#use "afile.ml"</code> - loads code file as if it was copied and pasted into the top loop.</li>
  <li><code>#mod_use</code> - like <code>#use</code> but loads the file like it was a module (name of file as a module name)</li>
  <li><code>#load "blah.cmo"</code>,<code>#load "blahlib.cma"</code> - load a compiled binary or library file.</li>
  <li><code>#show</code> - shows the type for an entity (variable or module).</li>
  <li><code>#show_type</code> - expands a type definition (if it has an expansion)</li>
  <li><code>#require</code> - loads a library (does not <code>open</code> it, just loads the module)</li>
  <li><code>#use_output "dune top"</code> - like the shell <code>xargs</code> command - run a command and assume output is top loop input commands.  The particular command <code>dune top</code> generates top loop commands to set up libraries and load the current project.</li>
</ul>
      
          </section>
        </div>
      </div>

				<div id="copyright">
					Web Design: <a href="http://templated.co">TEMPLATED</a> Images: <a href="http://unsplash.com">Unsplash</a> (<a href="http://unsplash.com/cc0">CC0</a>)
				</div>			


   </body>
</html>
